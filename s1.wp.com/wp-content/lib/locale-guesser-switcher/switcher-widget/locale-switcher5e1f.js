var WPCOMLocaleSwitcher=function(e){var t={locales:[],current:"",switcherTitle:"",overlayId:"ls-overlay",overlayCloseId:"ls-overlay-close",cookieName:"wpcom_locale",cookieDomain:"",defaultTitle:"Language",visible:false},i={};function o(e,t,i){if(t.addEventListener){t.addEventListener(e,i,false)}else if(t.attachEvent){t.attachEvent("on"+e,i)}}function a(){if(t.visible===false){t.visible=true;i.overlay.style.display="block";setTimeout(function(){i.overlay.setAttribute("class","animate slide-in-up")},50)}else{t.visible=false;i.overlay.setAttribute("class","slide-in-up");setTimeout(function(){i.overlay.style.display="none"},500)}}function n(){i.heading.childNodes[0].nodeValue=this.getAttribute("data-locale-title")}function l(){i.heading.childNodes[0].nodeValue=t.switcherTitle}function r(e){e.preventDefault();if(-1!=this.href.indexOf("#")){a();return false}var t=i.list.querySelector(".active");if(typeof t==="object"&&typeof t==="function"){t.setAttribute("class","")}this.parentNode.setAttribute("class","active");c(this.getAttribute("data-locale-code"),this.href+window.location.search)}function c(t,i){s(t);var o=new Image;o.onload=function(){window.location.href=i};o.onerror=o.onload;o.src=e.location.protocol+"//stats.wordpress.com/g.gif?v=wpcom-no-pv&x_language-switcher=manual-switch-"+t+"&rm="+Math.random();return false}function s(i){var o=new Date,a="";o.setTime(o.getTime()+5*365*24*60*60*1e3);a=" expires="+o.toGMTString();e.cookie=t.cookieName+"="+i+";"+a+"; path=/; domain="+t.cookieDomain}function d(i){var a=e.createElement("li"),c=e.createElement("a"),s;c.innerHTML=i.locale_name;s=typeof t.titles[i.code]==="object"?t.titles[i.code]["translation"]:t.defaultTitle;c.setAttribute("data-locale-code",i.code);c.setAttribute("data-locale-title",s);if(t.current==i.code){a.setAttribute("class","active");c.setAttribute("href","#");t.switcherTitle=s}else{c.setAttribute("href",i.href)}o("mouseover",c,n);o("mouseout",c,l);o("click",c,r);a.appendChild(c);return a}function u(){var i=e.createElement("ul"),o;for(var a=0,n=t.locales.length;a<n;a++){o=d(t.locales[a]);i.appendChild(o)}if(""==t.switcherTitle){t.switcherTitle=t.defaultTitle}return i}function f(){var i=e.createElement("div");i.id=t.overlayId;i.className="slide-in-up";return i}function h(){var i=e.createElement("h2");i.appendChild(e.createTextNode(t.switcherTitle));return i}function v(){var i=e.createElement("span");i.id=t.overlayCloseId;i.setAttribute("class","noticon noticon-close-alt");i.setAttribute("tabindex",0);i.setAttribute("role","button");i.onclick=a;i.addEventListener("keypress",e=>{if(e.code==="Enter"||e.code==="Space"){e.preventDefault();a()}});return i}function p(){var t=f(),o=u(),a=h();t.appendChild(v());i.heading=t.appendChild(a);i.list=t.appendChild(o);i.overlay=e.body.appendChild(t)}function m(){o("keydown",e,function(e){if(e.keyCode==27&&"block"==i.overlay.style.display){a()}},false)}function y(e,i,o){if(e.length<1){return}t.locales=e;t.current=i||"en";t.cookieDomain=o||".wordpress.com";t.titles=typeof WPCOMLocaleSwitcherTranslations==="object"?WPCOMLocaleSwitcherTranslations:{};p();m()}return{init:y,toggle:a,redirect:c}}(document);